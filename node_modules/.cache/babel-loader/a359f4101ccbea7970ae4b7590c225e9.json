{"ast":null,"code":"var _jsxFileName = \"C:\\\\test\\\\dash2-v1.0.1 (1)\\\\src\\\\pages\\\\examples\\\\Signup.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Routes } from \"../../routes\";\nconst Logout = () => {\n  const [errorMessage, setErrorMessage] = useState('');\n  const history = useHistory(); // Initialisation de la fonction history\n\n  useEffect(() => {\n    const handleLogout = async () => {\n      try {\n        const authToken = localStorage.getItem('token');\n        if (!authToken) {\n          throw new Error('No token found in localStorage');\n        }\n        const response = await fetch('https://report.iotfactory.eu/login/{redirect*}', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Session ${authToken}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Failed to logout');\n        }\n        // Redirection vers la page Signin après la déconnexion réussie\n        history.push(Routes.Signin.path);\n        localStorage.removeItem('token');\n        console.log('User logged out successfully');\n      } catch (error) {\n        console.error('Logout error:', error);\n        setErrorMessage('Failed to logout. Please try again.');\n      }\n    };\n    handleLogout(); // Appeler handleLogout dès que le composant est monté\n  }, []); // Le tableau vide des dépendances signifie que cela ne se déclenchera qu'une fois\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, errorMessage && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 30\n    }\n  }, errorMessage));\n};\nexport default Logout;","map":{"version":3,"names":["React","useState","useEffect","useHistory","Routes","Logout","errorMessage","setErrorMessage","history","handleLogout","authToken","localStorage","getItem","Error","response","fetch","method","headers","ok","push","Signin","path","removeItem","console","log","error","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className"],"sources":["C:/test/dash2-v1.0.1 (1)/src/pages/examples/Signup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Routes } from \"../../routes\";\n\nconst Logout = () => {\n    const [errorMessage, setErrorMessage] = useState('');\n    const history = useHistory(); // Initialisation de la fonction history\n\n    useEffect(() => {\n        const handleLogout = async () => {\n            try {\n                const authToken = localStorage.getItem('token');\n                if (!authToken) {\n                    throw new Error('No token found in localStorage');\n                }\n\n                const response = await fetch('https://report.iotfactory.eu/login/{redirect*}', {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Session ${authToken}`\n                    }\n                });\n\n                if (!response.ok) {\n                    throw new Error('Failed to logout');\n                }\n                // Redirection vers la page Signin après la déconnexion réussie\n                history.push(Routes.Signin.path);\n\n                localStorage.removeItem('token');\n                console.log('User logged out successfully');\n            } catch (error) {\n                console.error('Logout error:', error);\n                setErrorMessage('Failed to logout. Please try again.');\n            }\n        };\n\n        handleLogout(); // Appeler handleLogout dès que le composant est monté\n    }, []); // Le tableau vide des dépendances signifie que cela ne se déclenchera qu'une fois\n\n    return (\n        <div>\n            {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n        </div>\n    );\n};\n\nexport default Logout;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,MAAM,QAAQ,cAAc;AAErC,MAAMC,MAAM,GAAGA,CAAA,KAAM;EACjB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAMO,OAAO,GAAGL,UAAU,CAAC,CAAC,CAAC,CAAC;;EAE9BD,SAAS,CAAC,MAAM;IACZ,MAAMO,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACA,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC/C,IAAI,CAACF,SAAS,EAAE;UACZ,MAAM,IAAIG,KAAK,CAAC,gCAAgC,CAAC;QACrD;QAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gDAAgD,EAAE;UAC3EC,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAG,WAAUP,SAAU;UAC1C;QACJ,CAAC,CAAC;QAEF,IAAI,CAACI,QAAQ,CAACI,EAAE,EAAE;UACd,MAAM,IAAIL,KAAK,CAAC,kBAAkB,CAAC;QACvC;QACA;QACAL,OAAO,CAACW,IAAI,CAACf,MAAM,CAACgB,MAAM,CAACC,IAAI,CAAC;QAEhCV,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC;QAChCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZF,OAAO,CAACE,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACrClB,eAAe,CAAC,qCAAqC,CAAC;MAC1D;IACJ,CAAC;IAEDE,YAAY,CAAC,CAAC,CAAC,CAAC;EACpB,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER,oBACIT,KAAA,CAAA0B,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACK1B,YAAY,iBAAIN,KAAA,CAAA0B,aAAA;IAAGO,SAAS,EAAC,eAAe;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE1B,YAAgB,CAC9D,CAAC;AAEd,CAAC;AAED,eAAeD,MAAM"},"metadata":{},"sourceType":"module"}