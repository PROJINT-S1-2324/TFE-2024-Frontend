{"ast":null,"code":"var _jsxFileName = \"C:\\\\test\\\\dash2-v1.0.1 (1)\\\\src\\\\pages\\\\examples\\\\Signup.js\";\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport Heard from \"./Heard\"; // Import de useNavigate pour la redirection\n\nconst Logout = () => {\n  const [errorMessage, setErrorMessage] = useState('');\n  const navigate = useNavigate(); // Initialisation de la fonction navigate\n\n  const handleLogout = async () => {\n    try {\n      const authToken = localStorage.getItem('token');\n      if (!authToken) {\n        throw new Error('No token found in localStorage');\n      }\n      const response = await fetch('https://report.iotfactory.eu/login/{redirect*}', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Session ${authToken}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to logout');\n      }\n      localStorage.removeItem('token');\n      console.log('User logged out successfully');\n      console.log('token');\n\n      // Redirection vers la page Signin après la déconnexion réussie\n      navigate('/Signin');\n    } catch (error) {\n      console.error('Logout error:', error);\n      setErrorMessage('Failed to logout. Please try again.');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, \"D\\xE9connexion\"), errorMessage && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 30\n    }\n  }, errorMessage));\n};\nexport default Logout;","map":{"version":3,"names":["React","useState","Link","useNavigate","Heard","Logout","errorMessage","setErrorMessage","navigate","handleLogout","authToken","localStorage","getItem","Error","response","fetch","method","headers","ok","removeItem","console","log","error","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","className"],"sources":["C:/test/dash2-v1.0.1 (1)/src/pages/examples/Signup.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport Heard from \"./Heard\"; // Import de useNavigate pour la redirection\n\nconst Logout = () => {\n    const [errorMessage, setErrorMessage] = useState('');\n    const navigate = useNavigate(); // Initialisation de la fonction navigate\n\n    const handleLogout = async () => {\n        try {\n            const authToken = localStorage.getItem('token');\n            if (!authToken) {\n                throw new Error('No token found in localStorage');\n            }\n\n            const response = await fetch('https://report.iotfactory.eu/login/{redirect*}', {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Session ${authToken}`\n                }\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to logout');\n            }\n\n            localStorage.removeItem('token');\n            console.log('User logged out successfully');\n            console.log('token');\n\n            // Redirection vers la page Signin après la déconnexion réussie\n            navigate('/Signin');\n\n        } catch (error) {\n            console.error('Logout error:', error);\n            setErrorMessage('Failed to logout. Please try again.');\n        }\n    };\n\n    return (\n        <div>\n\n            <button onClick={handleLogout}>Déconnexion</button>\n            {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\n        </div>\n    );\n};\n\nexport default Logout;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AACpD,OAAOC,KAAK,MAAM,SAAS,CAAC,CAAC;;AAE7B,MAAMC,MAAM,GAAGA,CAAA,KAAM;EACjB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAMO,QAAQ,GAAGL,WAAW,CAAC,CAAC,CAAC,CAAC;;EAEhC,MAAMM,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACA,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC/C,IAAI,CAACF,SAAS,EAAE;QACZ,MAAM,IAAIG,KAAK,CAAC,gCAAgC,CAAC;MACrD;MAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gDAAgD,EAAE;QAC3EC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAG,WAAUP,SAAU;QAC1C;MACJ,CAAC,CAAC;MAEF,IAAI,CAACI,QAAQ,CAACI,EAAE,EAAE;QACd,MAAM,IAAIL,KAAK,CAAC,kBAAkB,CAAC;MACvC;MAEAF,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;MAChCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC3CD,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;;MAEpB;MACAb,QAAQ,CAAC,SAAS,CAAC;IAEvB,CAAC,CAAC,OAAOc,KAAK,EAAE;MACZF,OAAO,CAACE,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACrCf,eAAe,CAAC,qCAAqC,CAAC;IAC1D;EACJ,CAAC;EAED,oBACIP,KAAA,CAAAuB,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEI7B,KAAA,CAAAuB,aAAA;IAAQO,OAAO,EAAErB,YAAa;IAAAe,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,gBAAmB,CAAC,EAClDvB,YAAY,iBAAIN,KAAA,CAAAuB,aAAA;IAAGQ,SAAS,EAAC,eAAe;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEvB,YAAgB,CAC9D,CAAC;AAEd,CAAC;AAED,eAAeD,MAAM"},"metadata":{},"sourceType":"module"}